{% set page = namespace(path = '/') %}
{% extends "base.html" %}

{% block content %}
<div class="container">
  <div class="row">
      <form id="plot-form" method='get'>
      <!-- Date -->
      <div class="mb-3">
        <label for="date" class="form-label">Date</label>
        <input id="date" class="form-control" type="date" onchange="onFormInputChange()"/>
      </div>
    
      <!-- Region -->
      <div class="mb-3">
        <label for="size" class="form-label">Region</label>
        <select class="form-select" aria-label=".form-select" id="region" onchange="onFormInputChange()">
          <option selected value="uk_ireland">UK and Ireland</option>
          <option value="scotland">Scotland</option>
        </select>
      </div>
    
      <!-- Plot Pressure -->
      <div class="mb-3">
        <label class="form-check-label" for="flexCheckChecked">Plot Pressure</label>
	<input class="form-check-input" type="checkbox" value="" id="show_pressure" checked onchange="onFormInputChange()">
      </div>
    
      <!-- Figure Size -->
      <div class="mb-3">
        <label for="size" class="form-label">Size</label>
	<select class="form-select" aria-label=".form-select" id="size" onchange="onFormInputChange()">
          <option selected value="web">Web</option>
          <option value="a4">A4</option>
          <option value="a3">A3</option>
        </select>
      </div>
    
      <!-- Submit -->
      <button class="btn btn-primary" type="submit">Plot</button>
    </form>
  </div>
</div>

{% endblock %}

<!-- CSS -->
{% block css %}

{% endblock %}

<!-- JS -->
{% block scripts %}
<script>

function get_element(id) {
  // Wrapper for document.getElementById
  return document.getElementById(id) || null;
}

function onFormInputChange() {
  // onchange event for form elements -- updates the form's action URL
  var frm = get_element('plot-form');
  var date_picker = get_element('date');
  var region = get_element('region');
  var size = get_element('size');
  var show_pressure = get_element('show_pressure');
  if( frm && date_picker && region && size && show_pressure ) {
    frm.action = "{{ url_for('index') }}" 
      + "plot/" 
      + date.value + "/" 
      + region.value + "/" 
      + (show_pressure.checked ? "with_pressure" : "without_pressure") + "/" 
      + size.value;
  }
}

</script>
{% endblock %}
