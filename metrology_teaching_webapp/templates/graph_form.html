{% set page = namespace(path = '/') %}
{% extends "base.html" %}

{% block content %}
<div class="container">
  <div class="row">
      <form id="plot-form" method='get'>
      <!-- Date -->
      <div class="mb-3">
        <label for="date" class="form-label">Date</label>
        <input id="date" class="form-control" type="date" onchange="onFormInputChange()"/>
      </div>

      <!-- Time -->
      <div class="mb-3">
        <label for="time" class="form-label">Date</label>
	<!--<input id="time" class="form-control" type="time" onchange="onFormInputChange()"/>-->
        <select class="form-select" aria-label=".form-select" id="time" onchange="onFormInputChange()">
          <option value="00">00</option>
          <option value="01">01</option>
          <option value="02">02</option>
          <option value="03">03</option>
          <option value="04">04</option>
          <option value="05">05</option>
          <option value="06">06</option>
          <option value="07">07</option>
          <option value="08">08</option>
          <option value="09">09</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
          <option value="13">13</option>
          <option value="14">14</option>
          <option value="15">15</option>
          <option value="16">16</option>
          <option value="17">17</option>
          <option value="18">18</option>
          <option value="19">19</option>
          <option value="20">20</option>
          <option value="21">21</option>
          <option value="22">22</option>
          <option value="23">23</option>
        </select>

      </div>
    
      <!-- Region -->
      <div class="mb-3">
        <label for="size" class="form-label">Region</label>
        <select class="form-select" aria-label=".form-select" id="region" onchange="onFormInputChange()">
          <option selected value="uk_ireland">UK and Ireland</option>
          <option value="scotland">Scotland</option>
        </select>
      </div>
    
      <!-- Plot Pressure -->
      <div class="mb-3">
        <label class="form-check-label" for="flexCheckChecked">Plot Pressure</label>
	<input class="form-check-input" type="checkbox" value="" id="show_pressure" checked onchange="onFormInputChange()">
      </div>
    
      <!-- Figure Size -->
      <!--
      <div class="mb-3">
        <label for="size" class="form-label">Size</label>
	<select class="form-select" aria-label=".form-select" id="size" onchange="onFormInputChange()">
          <option selected value="web">Web</option>
          <option value="a4">A4</option>
          <option value="a3">A3</option>
        </select>
      </div>
      -->
      <input type="hidden" id="size" value="a3"/>
    
      <!-- Submit -->
      <button class="btn btn-primary" type="submit">Plot</button>
    </form>
  </div>
</div>

{% endblock %}

<!-- CSS -->
{% block css %}

{% endblock %}

<!-- JS -->
{% block scripts %}
<script>

function get_element(id) {
  // Wrapper for document.getElementById
  return document.getElementById(id) || null;
}

function onFormInputChange() {
  // onchange event for form elements -- updates the form's action URL
  var frm = get_element('plot-form');
  var date_picker = get_element('date');
  var time_picker = get_element('time');
  var region = get_element('region');
  var size = get_element('size');
  var show_pressure = get_element('show_pressure');
  if( frm && date_picker && region && size && show_pressure ) {
    frm.action = "{{ url_for('index') }}" 
      + "plot/" 
      + date.value + "/" 
      + time.value + "/" 
      + region.value + "/" 
      + (show_pressure.checked ? "with_pressure" : "without_pressure") + "/" 
      + size.value;
  }
}

// Disable dates later than today
datePicker = get_element('date');
if (datePicker) {
  datePicker.max = new Date().toISOString().split("T")[0];
}

</script>
{% endblock %}
